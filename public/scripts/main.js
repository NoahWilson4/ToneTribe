$(document).on("ready",function(){var e=function(e){console.log("songData",e);var t=$("<div>");return t.append('<form id="viewSong"></form>'),t.append('<div class="song-result-container"><h3><a href="/song/?id='+e._id+'">'+e.name+"</a></h3></div>"),t.attr("data-id",e._id),t};user.cocreationSongs.map(function(t){console.log("song test: ",t),$(".song-container").append(e(t))}),$("#create-new-song").on("submit",function(t){t.preventDefault();var n=$(this).find("[name=name]").val(),s={name:n};$.post("/api/createNewSong",s,function(t){console.log("responseData: ",t);var n=e(t);console.log("songEl: ",n),$(".song-container").append(n)})})}),$(document).on("ready",function(){function e(e){console.log("songData",e);var t=$("<div>");return t.append('<form id="viewSong"></form>'),t.append('<h3><a href="/song/?id='+e._id+'">'+e.name+"</a></h3>"),t.attr("data-id",e._id),t}console.log("testing"),$.get("/api/getSongs",{},function(t){console.log("response data on load get songs: ",t),t.map(function(t){$(".song-container").append(e(t))})}),$("#create-new-song").on("submit",function(t){t.preventDefault();var n=$(this).find("[name=name]").val(),s={name:n};$.post("/api/createNewSong",s,function(t){console.log("responseData: ",t);var n=e(t);console.log("songEl: ",n),$(".song-container").append(n)})})}),$(document).on("ready",function(){function e(){drawVisual=requestAnimationFrame(e),u.getByteFrequencyData(g),f.fillStyle="rgba(250, 250, 250, 0)",f.fillRect(0,0,m,p);for(var t,n=m/v*2,s=0,i=0;v>i;i++)t=g[i]/2.2,f.fillStyle="rgb(20,"+(t+100)+",150)",f.fillRect(s,p-t/1,n,t),s+=n+2}function t(){drawVisual=requestAnimationFrame(t),b.getByteFrequencyData(M),_.fillStyle="rgba(250, 250, 250, 0)",_.fillRect(0,0,k,w);for(var e,n=k/x*2,s=0,i=0;x>i;i++)e=M[i]/2.2,_.fillStyle="rgb(20,120,"+(e+120),_.fillRect(s,w-e/1,n,e),s+=n+1}function n(){drawVisual=requestAnimationFrame(n),D.getByteFrequencyData(P),C.fillStyle="rgba(250, 250, 250, 0)",C.fillRect(0,0,S,T);for(var e,t=S/I*2,s=0,i=0;I>i;i++)e=P[i]/2.2,C.fillStyle="rgb("+(e+100)+",224,126)",C.fillRect(s,T-e/1,t,e),s+=t+2}function s(){drawVisual=requestAnimationFrame(s),O.getByteFrequencyData(z),F.fillStyle="rgba(250, 250, 250, 0)",F.fillRect(0,0,U,G);for(var e,t=U/E*2,n=0,i=0;E>i;i++)e=z[i]/2.2,F.fillStyle="rgb("+(e+80)+",224,200)",F.fillRect(n,G-e/1,t,e),n+=t+3}function i(){drawVisual=requestAnimationFrame(i),L.getByteFrequencyData(R),B.fillStyle="rgba(250, 250, 250, 0)",B.fillRect(0,0,N,H);for(var e,t=N/q*2,n=0,s=0;q>s;s++)e=R[s]/2.2,B.fillStyle="rgb("+(e+100)+",50,50)",B.fillRect(n,H-e/1,t,e),n+=t+4}function o(){drawVisual=requestAnimationFrame(o),V.getByteFrequencyData(K),j.fillStyle="rgba(250, 250, 250, 0)",j.fillRect(0,0,X,J);for(var e,t=X/Q*2,n=0,s=0;Q>s;s++)e=K[s]/2.2,j.fillStyle="rgb(75,50,"+(e+100),j.fillRect(n,J-e/1,t,e),n+=t+5}var a=$("#comment-template").html(),r=Handlebars.compile(a);console.log("song test!!!!:",song),song.comments.map(function(e){var t=r(e);$("#comments-container").append(t)}),$("#addComment").on("submit",function(e){e.preventDefault();var t=$(this).find("textarea").val(),n=moment().format("MMMM Do YYYY, h:mm:ss a"),t={userProfilePic:user.profilePic,userId:user._id,userName:user.name,date:n,comment:t,likes:0,songId:song._id};$.post("/api/postComment",{comment:t,songId:song._id},function(e){console.log("responseData: ",e),console.log("addComment responseData: ",e);var n=r(t);$("#comments-container").append(n)})}),$(document).on("click",".like-comment",function(){var e=$(this),t=$(this).find("#commentInfo").attr("value"),n=$(this).closest(".list-group-item").find("#comment-text").text();console.log("songId, commentText: ",t,n);var s=$.ajax({type:"POST",data:{songId:t,comment:n},url:"/api/addCommentLike",traditional:!0}).error(function(){console.log("error")}).done(function(){console.log("done.",JSON.parse(s.responseText).likes),console.log("this test: ",this),$(e).closest(".list-group-item").find(".likes-comment").text(JSON.parse(s.responseText).likes+" Likes")})}),$("#uploadBackgroundPic").on("click",function(){console.log("click"),$("#upload-container").toggle("reveal")});var l=window.navigator;l.getUserMedia=l.getUserMedia||l.webkitGetUserMedia||l.mozGetUserMedia||l.msGetUserMedia;var c,d=new(window.AudioContext||window.webkitAudioContext);$.post("/api/getTrackUrls",{id:song._id},function(e){c=e,console.log("responseData 1: ",e),console.log("allTracks 1: ",c);var t=c[0],n=c[1],s=c[2],i=c[3],o=c[4],a=c[5],r=d.createGain(),l=d.createGain(),h=d.createGain(),f=d.createGain(),m=d.createGain(),p=d.createGain();if(console.log("tracks0 at beginning",t),console.log("tracks1 at beginning",n),console.log("test...."),t[0]){var v=document.createElement("audio");v.setAttribute("src",t[0].url),v.load(),v.controls=!0,$.get()}if(n[0]){var g=document.createElement("audio");g.setAttribute("src",n[0].url),g.load(),g.controls=!0,$.get()}if(s[0]){var y=document.createElement("audio");y.setAttribute("src",s[0].url),y.load(),y.controls=!0,$.get()}if(i[0]){var _=document.createElement("audio");_.setAttribute("src",i[0].url),_.load(),_.controls=!0,$.get()}if(o[0]){var k=document.createElement("audio");k.setAttribute("src",o[0].url),k.load(),k.controls=!0,$.get()}if(a[0]){var w=document.createElement("audio");w.setAttribute("src",a[0].url),w.load(),w.controls=!0,$.get()}if(t[0]){var x=d.createMediaElementSource(v);x.connect(r),r.connect(u),r.connect(d.destination)}if(n[0]){var M=d.createMediaElementSource(g);M.connect(l),l.connect(b),l.connect(d.destination)}if(s[0]){var Y=d.createMediaElementSource(y);Y.connect(h),h.connect(D),h.connect(d.destination)}if(i[0]){var C=d.createMediaElementSource(_);C.connect(f),f.connect(O),f.connect(d.destination)}if(o[0]){var S=d.createMediaElementSource(k);S.connect(m),m.connect(L),m.connect(d.destination)}if(a[0]){var T=d.createMediaElementSource(w);T.connect(p),p.connect(V),p.connect(d.destination)}$(".play0").on("click",function(){console.log("play click!"),v.play()}),$(".play1").on("click",function(){console.log("play click!"),g.play()}),$(".play2").on("click",function(){console.log("play click!"),y.play()}),$(".play3").on("click",function(){console.log("play click!"),_.play()}),$(".play4").on("click",function(){console.log("play click!"),k.play()}),$(".play5").on("click",function(){console.log("play click!"),w.play()}),$(document).on("click",".mute0",function(){r.gain.value=0,$(this).addClass("unmute0").removeClass("mute0")}),$(document).on("click",".unmute0",function(){r.gain.value=1,$(this).removeClass("unmute0").addClass("mute0")}),$(document).on("click",".mute1",function(){l.gain.value=0,$(this).addClass("unmute1").removeClass("mute1")}),$(document).on("click",".unmute1",function(){l.gain.value=1,$(this).removeClass("unmute1").addClass("mute1")}),$(document).on("click",".mute2",function(){h.gain.value=0,$(this).addClass("unmute2").removeClass("mute2")}),$(document).on("click",".unmute2",function(){h.gain.value=1,$(this).removeClass("unmute2").addClass("mute2")}),$(document).on("click",".mute3",function(){f.gain.value=0,$(this).addClass("unmute3").removeClass("mute3")}),$(document).on("click",".unmute3",function(){f.gain.value=1,$(this).removeClass("unmute3").addClass("mute3")}),$(document).on("click",".mute4",function(){m.gain.value=0,$(this).addClass("unmute4").removeClass("mute4")}),$(document).on("click",".unmute4",function(){m.gain.value=1,$(this).removeClass("unmute4").addClass("mute4")}),$(document).on("click",".mute5",function(){p.gain.value=0,$(this).addClass("unmute5").removeClass("mute5")}),$(document).on("click",".unmute5",function(){p.gain.value=1,$(this).removeClass("unmute5").addClass("mute5")}),$("#play").on("click",function(){console.log("play all..."),v&&v.play(),g&&g.play(),y&&y.play(),_&&_.play(),k&&k.play(),w&&w.play()}),$("#stop").on("click",function(){console.log("play all..."),v&&v.pause(),g&&g.pause(),y&&y.pause(),_&&_.pause(),k&&k.pause(),w&&w.pause()}),$("#select0").on("change",function(){console.log("test: ",$("#select0 option:selected").val());var e=$("#select0 option:selected").val();console.log("tracks0 in selector, trackTitle",e,t);for(var n=0;n<t.length;n++){var s=t[n].trackTitle;s===e&&(console.log("match!"),v.setAttribute("src",t[n].url),$(this).closest(".track-container").find(".song-user-name").text(t[n].userName),$(this).closest(".track-container").find(".song-track-name").text(e),$(this).closest(".track-container").find(".song-user-image").css({backgroundImage:"url("+t[n].userPic+")"}),$(this).closest(".track-container").find(".likes").text(t[n].likes+" Likes"))}}).trigger("change"),$("#select1").on("change",function(){console.log("test: ",$("#select1 option:selected").val());var e=$("#select1 option:selected").val();console.log("tracks1 in selector, trackTitle",e,n);for(var t=0;t<n.length;t++){var s=n[t].trackTitle;s===e&&(console.log("match!"),g.setAttribute("src",n[t].url),$(this).closest(".track-container").find(".song-user-name").text(n[t].userName),$(this).closest(".track-container").find(".song-track-name").text(e),$(this).closest(".track-container").find(".song-user-image").css({backgroundImage:"url("+n[t].userPic+")"}),$(this).closest(".track-container").find(".likes").text(n[t].likes+" Likes"))}}).trigger("change"),$("#select2").on("change",function(){console.log("test: ",$("#select2 option:selected").val());var e=$("#select2 option:selected").val();console.log("tracks2 in selector, trackTitle",e,s);for(var t=0;t<s.length;t++){var n=s[t].trackTitle;n===e&&(console.log("match!"),y.setAttribute("src",s[t].url),$(this).closest(".track-container").find(".song-user-name").text(s[t].userName),$(this).closest(".track-container").find(".song-track-name").text(e),$(this).closest(".track-container").find(".song-user-image").css({backgroundImage:"url("+s[t].userPic+")"}),$(this).closest(".track-container").find(".likes").text(s[t].likes+" Likes"))}}).trigger("change"),$("#select3").on("change",function(){console.log("test: ",$("#select3 option:selected").val());var e=$("#select3 option:selected").val();console.log("tracks3 in selector, trackTitle",e,i);for(var t=0;t<i.length;t++){var n=i[t].trackTitle;n===e&&(console.log("match!"),_.setAttribute("src",i[t].url),$(this).closest(".track-container").find(".song-user-name").text(i[t].userName),$(this).closest(".track-container").find(".song-track-name").text(e),$(this).closest(".track-container").find(".song-user-image").css({backgroundImage:"url("+i[t].userPic+")"}),$(this).closest(".track-container").find(".likes").text(i[t].likes+" Likes"))}}).trigger("change"),$("#select4").on("change",function(){console.log("test: ",$("#select4 option:selected").val());var e=$("#select4 option:selected").val();console.log("tracks4 in selector, trackTitle",e,o);for(var t=0;t<o.length;t++){var n=o[t].trackTitle;n===e&&(console.log("match!"),k.setAttribute("src",o[t].url),$(this).closest(".track-container").find(".song-user-name").text(o[t].userName),$(this).closest(".track-container").find(".song-track-name").text(e),$(this).closest(".track-container").find(".song-user-image").css({backgroundImage:"url("+o[t].userPic+")"}),$(this).closest(".track-container").find(".likes").text(o[t].likes+" Likes"))}}).trigger("change"),$("#select5").on("change",function(){console.log("test: ",$("#select5 option:selected").val());var e=$("#select5 option:selected").val();console.log("tracks5 in selector, trackTitle",e,a);for(var t=0;t<a.length;t++){var n=a[t].trackTitle;n===e&&(console.log("match!"),w.setAttribute("src",a[t].url),$(this).closest(".track-container").find(".song-user-name").text(a[t].userName),$(this).closest(".track-container").find(".song-track-name").text(e),$(this).closest(".track-container").find(".song-user-image").css({backgroundImage:"url("+a[t].userPic+")"}),$(this).closest(".track-container").find(".likes").text(a[t].likes+" Likes"))}}).trigger("change")});var u=d.createAnalyser(),h=document.getElementById("canvas0"),f=h.getContext("2d"),m=h.width,p=90;u.fftSize=256;var v=u.frequencyBinCount;console.log(v);var g=new Uint8Array(v);f.clearRect(0,0,m,p),e();var b=d.createAnalyser(),y=document.getElementById("canvas1"),_=y.getContext("2d"),k=y.width,w=90;b.fftSize=256;var x=b.frequencyBinCount;console.log(x);var M=new Uint8Array(x);_.clearRect(0,0,k,w),t();var D=d.createAnalyser(),Y=document.getElementById("canvas2"),C=Y.getContext("2d"),S=Y.width,T=90;D.fftSize=256;var I=D.frequencyBinCount;console.log(I);var P=new Uint8Array(I);C.clearRect(0,0,S,T),n();var O=d.createAnalyser(),A=document.getElementById("canvas3"),F=A.getContext("2d"),U=A.width,G=90;O.fftSize=256;var E=O.frequencyBinCount;console.log(E);var z=new Uint8Array(E);F.clearRect(0,0,U,G),s();var L=d.createAnalyser(),W=document.getElementById("canvas4"),B=W.getContext("2d"),N=W.width,H=90;L.fftSize=256;var q=L.frequencyBinCount;console.log(q);var R=new Uint8Array(q);B.clearRect(0,0,N,H),i();var V=d.createAnalyser(),Z=document.getElementById("canvas5"),j=Z.getContext("2d"),X=Z.width,J=90;V.fftSize=256;var Q=V.frequencyBinCount;console.log(Q);var K=new Uint8Array(Q);j.clearRect(0,0,X,J),o()}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return Mt.call(e,t)}function s(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e){yt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function o(e,t){var n=!0;return h(function(){return n&&(i(e),n=!1),t.apply(this,arguments)},t)}function a(e,t){gn[e]||(i(t),gn[e]=!0)}function r(e,t){return function(n){return p(e.call(this,n),t)}}function l(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function c(){}function d(e,t){t!==!1&&I(e),f(this,e),this._d=new Date(+e._d)}function u(e){var t=x(e),n=t.year||0,s=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,r=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*r,this._days=+a+7*o,this._months=+i+3*s+12*n,this._data={},this._locale=yt.localeData(),this._bubble()}function h(e,t){for(var s in t)n(t,s)&&(e[s]=t[s]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t){var n,s,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),At.length>0)for(n in At)s=At[n],i=t[s],"undefined"!=typeof i&&(e[s]=i);return e}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function p(e,t,n){for(var s=""+Math.abs(e),i=e>=0;s.length<t;)s="0"+s;return(i?n?"+":"":"-")+s}function v(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function g(e,t){var n;return t=U(t,e),e.isBefore(t)?n=v(e,t):(n=v(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function b(e,t){return function(n,s){var i,o;return null===s||isNaN(+s)||(a(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=s,s=o),n="string"==typeof n?+n:n,i=yt.duration(n,s),y(this,i,e),this}}function y(e,t,n,s){var i=t._milliseconds,o=t._days,a=t._months;s=null==s?!0:s,i&&e._d.setTime(+e._d+i*n),o&&ft(e,"Date",ht(e,"Date")+o*n),a&&ut(e,ht(e,"Month")+a*n),s&&yt.updateOffset(e,o||a)}function $(e){return"[object Array]"===Object.prototype.toString.call(e)}function _(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function k(e,t,n){var s,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(s=0;i>s;s++)(n&&e[s]!==t[s]||!n&&D(e[s])!==D(t[s]))&&a++;return a+o}function w(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=dn[e]||un[t]||t}return e}function x(e){var t,s,i={};for(s in e)n(e,s)&&(t=w(s),t&&(i[t]=e[s]));return i}function M(t){var n,s;if(0===t.indexOf("week"))n=7,s="day";else{if(0!==t.indexOf("month"))return;n=12,s="month"}yt[t]=function(i,o){var a,r,l=yt._locale[t],c=[];if("number"==typeof i&&(o=i,i=e),r=function(e){var t=yt().utc().set(s,e);return l.call(yt._locale,t,i||"")},null!=o)return r(o);for(a=0;n>a;a++)c.push(r(a));return c}}function D(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function Y(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function C(e,t,n){return rt(yt([e,11,31+t-n]),t,n).week}function S(e){return T(e)?366:365}function T(e){return e%4===0&&e%100!==0||e%400===0}function I(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Yt]<0||e._a[Yt]>11?Yt:e._a[Ct]<1||e._a[Ct]>Y(e._a[Dt],e._a[Yt])?Ct:e._a[St]<0||e._a[St]>23?St:e._a[Tt]<0||e._a[Tt]>59?Tt:e._a[It]<0||e._a[It]>59?It:e._a[Pt]<0||e._a[Pt]>999?Pt:-1,e._pf._overflowDayOfYear&&(Dt>t||t>Ct)&&(t=Ct),e._pf.overflow=t)}function P(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function O(e){return e?e.toLowerCase().replace("_","-"):e}function A(e){for(var t,n,s,i,o=0;o<e.length;){for(i=O(e[o]).split("-"),t=i.length,n=O(e[o+1]),n=n?n.split("-"):null;t>0;){if(s=F(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&k(i,n,!0)>=t-1)break;t--}o++}return null}function F(e){var t=null;if(!Ot[e]&&Ft)try{t=yt.locale(),require("./locale/"+e),yt.locale(t)}catch(n){}return Ot[e]}function U(e,t){return t._isUTC?yt(e).zone(t._offset||0):yt(e).local()}function G(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function E(e){var t,n,s=e.match(zt);for(t=0,n=s.length;n>t;t++)s[t]=vn[s[t]]?vn[s[t]]:G(s[t]);return function(i){var o="";for(t=0;n>t;t++)o+=s[t]instanceof Function?s[t].call(i,e):s[t];return o}}function z(e,t){return e.isValid()?(t=L(t,e.localeData()),hn[t]||(hn[t]=E(t)),hn[t](e)):e.localeData().invalidDate()}function L(e,t){function n(e){return t.longDateFormat(e)||e}var s=5;for(Lt.lastIndex=0;s>=0&&Lt.test(e);)e=e.replace(Lt,n),Lt.lastIndex=0,s-=1;return e}function W(e,t){var n,s=t._strict;switch(e){case"Q":return Jt;case"DDDD":return Kt;case"YYYY":case"GGGG":case"gggg":return s?en:Nt;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return s?tn:Ht;case"S":if(s)return Jt;case"SS":if(s)return Qt;case"SSS":if(s)return Kt;case"DDD":return Bt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Rt;case"a":case"A":return t._locale._meridiemParse;case"X":return jt;case"Z":case"ZZ":return Vt;case"T":return Zt;case"SSSS":return qt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return s?Qt:Wt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Wt;case"Do":return Xt;default:return n=new RegExp(X(j(e.replace("\\","")),"i"))}}function B(e){e=e||"";var t=e.match(Vt)||[],n=t[t.length-1]||[],s=(n+"").match(ln)||["-",0,0],i=+(60*s[1])+D(s[2]);return"+"===s[0]?-i:i}function N(e,t,n){var s,i=n._a;switch(e){case"Q":null!=t&&(i[Yt]=3*(D(t)-1));break;case"M":case"MM":null!=t&&(i[Yt]=D(t)-1);break;case"MMM":case"MMMM":s=n._locale.monthsParse(t),null!=s?i[Yt]=s:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[Ct]=D(t));break;case"Do":null!=t&&(i[Ct]=D(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=D(t));break;case"YY":i[Dt]=yt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":i[Dt]=D(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":i[St]=D(t);break;case"m":case"mm":i[Tt]=D(t);break;case"s":case"ss":i[It]=D(t);break;case"S":case"SS":case"SSS":case"SSSS":i[Pt]=D(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=B(t);break;case"dd":case"ddd":case"dddd":s=n._locale.weekdaysParse(t),null!=s?(n._w=n._w||{},n._w.d=s):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=D(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=yt.parseTwoDigitYear(t)}}function H(e){var n,s,i,o,a,r,l;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(a=1,r=4,s=t(n.GG,e._a[Dt],rt(yt(),1,4).year),i=t(n.W,1),o=t(n.E,1)):(a=e._locale._week.dow,r=e._locale._week.doy,s=t(n.gg,e._a[Dt],rt(yt(),a,r).year),i=t(n.w,1),null!=n.d?(o=n.d,a>o&&++i):o=null!=n.e?n.e+a:a),l=lt(s,i,o,r,a),e._a[Dt]=l.year,e._dayOfYear=l.dayOfYear}function q(e){var n,s,i,o,a=[];if(!e._d){for(i=V(e),e._w&&null==e._a[Ct]&&null==e._a[Yt]&&H(e),e._dayOfYear&&(o=t(e._a[Dt],i[Dt]),e._dayOfYear>S(o)&&(e._pf._overflowDayOfYear=!0),s=st(o,0,e._dayOfYear),e._a[Yt]=s.getUTCMonth(),e._a[Ct]=s.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=a[n]=i[n];for(;7>n;n++)e._a[n]=a[n]=null==e._a[n]?2===n?1:0:e._a[n];e._d=(e._useUTC?st:nt).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function R(e){var t;e._d||(t=x(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],q(e))}function V(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Z(e){if(e._f===yt.ISO_8601)return void Q(e);e._a=[],e._pf.empty=!0;var t,n,s,i,o,a=""+e._i,r=a.length,l=0;for(s=L(e._f,e._locale).match(zt)||[],t=0;t<s.length;t++)i=s[t],n=(a.match(W(i,e))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&e._pf.unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),l+=n.length),vn[i]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(i),N(i,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(i);e._pf.charsLeftOver=r-l,a.length>0&&e._pf.unusedInput.push(a),e._isPm&&e._a[St]<12&&(e._a[St]+=12),e._isPm===!1&&12===e._a[St]&&(e._a[St]=0),q(e),I(e)}function j(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(e){var t,n,i,o,a;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(o=0;o<e._f.length;o++)a=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=s(),t._f=e._f[o],Z(t),P(t)&&(a+=t._pf.charsLeftOver,a+=10*t._pf.unusedTokens.length,t._pf.score=a,(null==i||i>a)&&(i=a,n=t));h(e,n||t)}function Q(e){var t,n,s=e._i,i=sn.exec(s);if(i){for(e._pf.iso=!0,t=0,n=an.length;n>t;t++)if(an[t][1].exec(s)){e._f=an[t][0]+(i[6]||" ");break}for(t=0,n=rn.length;n>t;t++)if(rn[t][1].exec(s)){e._f+=rn[t][0];break}s.match(Vt)&&(e._f+="Z"),Z(e)}else e._isValid=!1}function K(e){Q(e),e._isValid===!1&&(delete e._isValid,yt.createFromInputFallback(e))}function et(e,t){var n,s=[];for(n=0;n<e.length;++n)s.push(t(e[n],n));return s}function tt(t){var n,s=t._i;s===e?t._d=new Date:_(s)?t._d=new Date(+s):null!==(n=Ut.exec(s))?t._d=new Date(+n[1]):"string"==typeof s?K(t):$(s)?(t._a=et(s.slice(0),function(e){return parseInt(e,10)}),q(t)):"object"==typeof s?R(t):"number"==typeof s?t._d=new Date(s):yt.createFromInputFallback(t)}function nt(e,t,n,s,i,o,a){var r=new Date(e,t,n,s,i,o,a);return 1970>e&&r.setFullYear(e),r}function st(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function it(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ot(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}function at(e,t,n){var s=yt.duration(e).abs(),i=xt(s.as("s")),o=xt(s.as("m")),a=xt(s.as("h")),r=xt(s.as("d")),l=xt(s.as("M")),c=xt(s.as("y")),d=i<fn.s&&["s",i]||1===o&&["m"]||o<fn.m&&["mm",o]||1===a&&["h"]||a<fn.h&&["hh",a]||1===r&&["d"]||r<fn.d&&["dd",r]||1===l&&["M"]||l<fn.M&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=n,ot.apply({},d)}function rt(e,t,n){var s,i=n-t,o=n-e.day();return o>i&&(o-=7),i-7>o&&(o+=7),s=yt(e).add(o,"d"),{week:Math.ceil(s.dayOfYear()/7),year:s.year()}}function lt(e,t,n,s,i){var o,a,r=st(e,0,1).getUTCDay();return r=0===r?7:r,n=null!=n?n:i,o=i-r+(r>s?7:0)-(i>r?7:0),a=7*(t-1)+(n-i)+o+1,{year:a>0?e:e-1,dayOfYear:a>0?a:S(e-1)+a}}function ct(t){var n=t._i,s=t._f;return t._locale=t._locale||yt.localeData(t._l),null===n||s===e&&""===n?yt.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),yt.isMoment(n)?new d(n,!0):(s?$(s)?J(t):Z(t):tt(t),new d(t)))}function dt(e,t){var n,s;if(1===t.length&&$(t[0])&&(t=t[0]),!t.length)return yt();for(n=t[0],s=1;s<t.length;++s)t[s][e](n)&&(n=t[s]);return n}function ut(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),Y(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function ht(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ft(e,t,n){return"Month"===t?ut(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function mt(e,t){return function(n){return null!=n?(ft(this,e,n),yt.updateOffset(this,t),this):ht(this,e)}}function pt(e){return 400*e/146097}function vt(e){return 146097*e/400}function gt(e){yt.duration.fn[e]=function(){return this._data[e]}}function bt(e){"undefined"==typeof ender&&($t=wt.moment,wt.moment=e?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",yt):yt)}for(var yt,$t,_t,kt="2.8.3",wt="undefined"!=typeof global?global:this,xt=Math.round,Mt=Object.prototype.hasOwnProperty,Dt=0,Yt=1,Ct=2,St=3,Tt=4,It=5,Pt=6,Ot={},At=[],Ft="undefined"!=typeof module&&module.exports,Ut=/^\/?Date\((\-?\d+)/i,Gt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Et=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,zt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Lt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Wt=/\d\d?/,Bt=/\d{1,3}/,Nt=/\d{1,4}/,Ht=/[+\-]?\d{1,6}/,qt=/\d+/,Rt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Vt=/Z|[\+\-]\d\d:?\d\d/gi,Zt=/T/i,jt=/[\+\-]?\d+(\.\d{1,3})?/,Xt=/\d{1,2}/,Jt=/\d/,Qt=/\d\d/,Kt=/\d{3}/,en=/\d{4}/,tn=/[+-]?\d{6}/,nn=/[+-]?\d+/,sn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,on="YYYY-MM-DDTHH:mm:ssZ",an=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ln=/([\+\-]|\d\d)/gi,cn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),dn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},un={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},hn={},fn={s:45,m:45,h:22,d:26,M:11},mn="DDD w W M D d".split(" "),pn="M D H h m s w W".split(" "),vn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return p(this.year()%100,2)},YYYY:function(){return p(this.year(),4)},YYYYY:function(){return p(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+p(Math.abs(e),6)},gg:function(){return p(this.weekYear()%100,2)},gggg:function(){return p(this.weekYear(),4)},ggggg:function(){return p(this.weekYear(),5)},GG:function(){return p(this.isoWeekYear()%100,2)},GGGG:function(){return p(this.isoWeekYear(),4)},GGGGG:function(){return p(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return D(this.milliseconds()/100)},SS:function(){return p(D(this.milliseconds()/10),2)},SSS:function(){return p(this.milliseconds(),3)},SSSS:function(){return p(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+p(D(e/60),2)+":"+p(D(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+p(D(e/60),2)+p(D(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},gn={},bn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];mn.length;)_t=mn.pop(),vn[_t+"o"]=l(vn[_t],_t);for(;pn.length;)_t=pn.pop(),vn[_t+_t]=r(vn[_t],2);vn.DDDD=r(vn.DDD,3),h(c.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,s;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=yt.utc([2e3,t]),s="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(s.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,s;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=yt([2e3,1]).day(t),s="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(s.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,s){var i=this._relativeTime[n];
return"function"==typeof i?i(e,t,n,s):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return rt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),yt=function(t,n,i,o){var a;return"boolean"==typeof i&&(o=i,i=e),a={},a._isAMomentObject=!0,a._i=t,a._f=n,a._l=i,a._strict=o,a._isUTC=!1,a._pf=s(),ct(a)},yt.suppressDeprecationWarnings=!1,yt.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),yt.min=function(){var e=[].slice.call(arguments,0);return dt("isBefore",e)},yt.max=function(){var e=[].slice.call(arguments,0);return dt("isAfter",e)},yt.utc=function(t,n,i,o){var a;return"boolean"==typeof i&&(o=i,i=e),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=i,a._i=t,a._f=n,a._strict=o,a._pf=s(),ct(a).utc()},yt.unix=function(e){return yt(1e3*e)},yt.duration=function(e,t){var s,i,o,a,r=e,l=null;return yt.isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(r={},t?r[t]=e:r.milliseconds=e):(l=Gt.exec(e))?(s="-"===l[1]?-1:1,r={y:0,d:D(l[Ct])*s,h:D(l[St])*s,m:D(l[Tt])*s,s:D(l[It])*s,ms:D(l[Pt])*s}):(l=Et.exec(e))?(s="-"===l[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s},r={y:o(l[2]),M:o(l[3]),d:o(l[4]),h:o(l[5]),m:o(l[6]),s:o(l[7]),w:o(l[8])}):"object"==typeof r&&("from"in r||"to"in r)&&(a=g(yt(r.from),yt(r.to)),r={},r.ms=a.milliseconds,r.M=a.months),i=new u(r),yt.isDuration(e)&&n(e,"_locale")&&(i._locale=e._locale),i},yt.version=kt,yt.defaultFormat=on,yt.ISO_8601=function(){},yt.momentProperties=At,yt.updateOffset=function(){},yt.relativeTimeThreshold=function(t,n){return fn[t]===e?!1:n===e?fn[t]:(fn[t]=n,!0)},yt.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return yt.locale(e,t)}),yt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?yt.defineLocale(e,t):yt.localeData(e),n&&(yt.duration._locale=yt._locale=n)),yt._locale._abbr},yt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Ot[e]||(Ot[e]=new c),Ot[e].set(t),yt.locale(e),Ot[e]):(delete Ot[e],null)},yt.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(e){return yt.localeData(e)}),yt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return yt._locale;if(!$(e)){if(t=F(e))return t;e=[e]}return A(e)},yt.isMoment=function(e){return e instanceof d||null!=e&&n(e,"_isAMomentObject")},yt.isDuration=function(e){return e instanceof u};for(_t=bn.length-1;_t>=0;--_t)M(bn[_t]);yt.normalizeUnits=function(e){return w(e)},yt.invalid=function(e){var t=yt.utc(0/0);return null!=e?h(t._pf,e):t._pf.userInvalidated=!0,t},yt.parseZone=function(){return yt.apply(null,arguments).parseZone()},yt.parseTwoDigitYear=function(e){return D(e)+(D(e)>68?1900:2e3)},h(yt.fn=d.prototype,{clone:function(){return yt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=yt(this).utc();return 0<e.year()&&e.year()<=9999?z(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):z(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return P(this)},isDSTShifted:function(){return this._a?this.isValid()&&k(this._a,(this._isUTC?yt.utc(this._a):yt(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=z(this,e||yt.defaultFormat);return this.localeData().postformat(t)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(e,t,n){var s,i,o,a=U(e,this),r=6e4*(this.zone()-a.zone());return t=w(t),"year"===t||"month"===t?(s=432e5*(this.daysInMonth()+a.daysInMonth()),i=12*(this.year()-a.year())+(this.month()-a.month()),o=this-yt(this).startOf("month")-(a-yt(a).startOf("month")),o-=6e4*(this.zone()-yt(this).startOf("month").zone()-(a.zone()-yt(a).startOf("month").zone())),i+=o/s,"year"===t&&(i/=12)):(s=this-a,i="second"===t?s/1e3:"minute"===t?s/6e4:"hour"===t?s/36e5:"day"===t?(s-r)/864e5:"week"===t?(s-r)/6048e5:s),n?i:m(i)},from:function(e,t){return yt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(yt(),e)},calendar:function(e){var t=e||yt(),n=U(t,this).startOf("day"),s=this.diff(n,"days",!0),i=-6>s?"sameElse":-1>s?"lastWeek":0>s?"lastDay":1>s?"sameDay":2>s?"nextDay":7>s?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this))},isLeapYear:function(){return T(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=it(e,this.localeData()),this.add(e-t,"d")):t},month:mt("Month",!0),startOf:function(e){switch(e=w(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=w(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t=w("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=yt.isMoment(e)?e:yt(e),+this>+e):+this.clone().startOf(t)>+yt(e).startOf(t)},isBefore:function(e,t){return t=w("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=yt.isMoment(e)?e:yt(e),+e>+this):+this.clone().startOf(t)<+yt(e).startOf(t)},isSame:function(e,t){return t=w(t||"millisecond"),"millisecond"===t?(e=yt.isMoment(e)?e:yt(e),+this===+e):+this.clone().startOf(t)===+U(e,this).startOf(t)},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=yt.apply(null,arguments),this>e?this:e}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=yt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,s=this._offset||0;return null==e?this._isUTC?s:this._dateTzOffset():("string"==typeof e&&(e=B(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),s!==e&&(!t||this._changeInProgress?y(this,yt.duration(s-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,yt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?yt(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return Y(this.year(),this.month())},dayOfYear:function(e){var t=xt((yt(this).startOf("day")-yt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=rt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=rt(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=rt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return C(this.year(),e.dow,e.doy)},get:function(e){return e=w(e),this[e]()},set:function(e,t){return e=w(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=yt.localeData(t),null!=n&&(this._locale=n),this)},lang:o("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),yt.fn.millisecond=yt.fn.milliseconds=mt("Milliseconds",!1),yt.fn.second=yt.fn.seconds=mt("Seconds",!1),yt.fn.minute=yt.fn.minutes=mt("Minutes",!1),yt.fn.hour=yt.fn.hours=mt("Hours",!0),yt.fn.date=mt("Date",!0),yt.fn.dates=o("dates accessor is deprecated. Use date instead.",mt("Date",!0)),yt.fn.year=mt("FullYear",!0),yt.fn.years=o("years accessor is deprecated. Use year instead.",mt("FullYear",!0)),yt.fn.days=yt.fn.day,yt.fn.months=yt.fn.month,yt.fn.weeks=yt.fn.week,yt.fn.isoWeeks=yt.fn.isoWeek,yt.fn.quarters=yt.fn.quarter,yt.fn.toJSON=yt.fn.toISOString,h(yt.duration.fn=u.prototype,{_bubble:function(){var e,t,n,s=this._milliseconds,i=this._days,o=this._months,a=this._data,r=0;a.milliseconds=s%1e3,e=m(s/1e3),a.seconds=e%60,t=m(e/60),a.minutes=t%60,n=m(t/60),a.hours=n%24,i+=m(n/24),r=m(pt(i)),i-=m(vt(r)),o+=m(i/30),i%=30,r+=m(o/12),o%=12,a.days=i,a.months=o,a.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return m(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*D(this._months/12)},humanize:function(e){var t=at(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=yt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=yt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=w(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=w(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*pt(t),"month"===e?n:n/12;switch(t=this._days+vt(this._months/12),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:yt.fn.lang,locale:yt.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),s=Math.abs(this.hours()),i=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(s||i||o?"T":"")+(s?s+"H":"")+(i?i+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}}),yt.duration.fn.toString=yt.duration.fn.toISOString;for(_t in cn)n(cn,_t)&&gt(_t.toLowerCase());yt.duration.fn.asMilliseconds=function(){return this.as("ms")},yt.duration.fn.asSeconds=function(){return this.as("s")},yt.duration.fn.asMinutes=function(){return this.as("m")},yt.duration.fn.asHours=function(){return this.as("h")},yt.duration.fn.asDays=function(){return this.as("d")},yt.duration.fn.asWeeks=function(){return this.as("weeks")},yt.duration.fn.asMonths=function(){return this.as("M")},yt.duration.fn.asYears=function(){return this.as("y")},yt.locale("en",{ordinal:function(e){var t=e%10,n=1===D(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Ft?module.exports=yt:"function"==typeof define&&define.amd?(define("moment",function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(wt.moment=$t),yt}),bt(!0)):bt()}.call(this),$(document).on("ready",function(){var e=function(e){var t=e;t=t.split("-");var n=new Date,s=n.getYear()+1900,i=n.getMonth()+1,o=n.getDate(),a=[];a.push(s,i,o);for(var r=0;r<t.length;r++)t[r]=Number(t[r]);var l=a[0]-t[0];return t[1]>=a[1]&&t[2]>a[2]&&l--,l},t=function(e){var t=e;t=t.split("-"),t.shift();for(var n=0;n<t.length;n++)t[n]=Number(t[n]);if(console.log("birthday: ",t),12===t[0]&&t[1]>=22||1===t[0]&&t[1]<=19)var s="Capricorn";else if(1===t[0]&&t[1]>=20||2===t[0]&&t[1]<=19)var s="Aquarius";else if(2===t[0]&&t[1]>=20||3===t[0]&&t[1]<=20)var s="Pisces";else if(3===t[0]&&t[1]>=21||4===t[0]&&t[1]<=19)var s="Aries";else if(4===t[0]&&t[1]>=20||5===t[0]&&t[1]<=20)var s="Taurus";else if(5===t[0]&&t[1]>=21||6===t[0]&&t[1]<=20)var s="Gemini";else if(6===t[0]&&t[1]>=21||7===t[0]&&t[1]<=22)var s="Cancer";else if(7===t[0]&&t[1]>=23||8===t[0]&&t[1]<=22)var s="Leo";else if(8===t[0]&&t[1]>=23||9===t[0]&&t[1]<=22)var s="Virgo";else if(9===t[0]&&t[1]>=23||10===t[0]&&t[1]<=24)var s="Libra";else if(10===t[0]&&t[1]>=24||11===t[0]&&t[1]<=22)var s="Scorpio";else if(11===t[0]&&t[1]>=23||12===t[0]&&t[1]<=21)var s="Scorpio";return console.log("sign: ",s),s},n=function(e){if(e){for(var t=e,n=[],s=0;s<t.length;s++)n.push(t[s]);for(var i=0;i<n.length-1;i++)n[i]="<div class='words'> "+n[i]+", </div>";return n[n.length-1]="<div class='words'>"+n[i]+"</div>",n}},s=function(e,t){if(t){$(e).text("");for(var n=0;n<t.length;n++)$(e).append(t[n])}},i=function(e){for(var t=0;t<r.length;t++)if(r[t].userId===e)return r[t]},o=function(e,t){this.email=e,this.password=t,this.photos=[],r.push(this)};o.prototype.render=function(){$(".name").text(this.name),$(".name").data("userId",this.userId),$(".location").text(this.location);var e=this.bands,t=n(e),i=".bands";s(i,t),$(".profile-pic").css({backgroundImage:this.profilePic}),$(".profile-top").css({backgroundImage:this.backgroundPic});var o=this.instruments,a=n(o),r=".instruments";s(r,a);var l=this.styles,c=n(l),d=".styles";s(d,c);var u=this.skills,h=n(u),f=".skills";s(f,h);var m=this.inspirations,p=n(m),v=".inspirations";s(v,p),$(".improv-comp").val(this.improvComp),$(".birthday").text(this.age),$(".astro-sign").text(this.astro);for(var g=0;g<this.media.length;g++)$(".media").append(this.media[g]);$(".about").text(this.about),$(".philosophy").text(this.philosophy)},o.prototype.addToBand=function(e){this.band=e,console.log("this: "),e.push(this),e.combineMemberInfo()},o.prototype.displayAsMember=function(){var e=this.profilePic;e=e.split('"'),e=e[1],this.memberElement=$('<div class="list-group results"><a href="#" class="list-group-item result-block"><img id="memberPic" class="search-profile-pic" src="'+e+'"><div class="search-result-info"><h4 class="list-group-item-heading">'+this.name+'</h4><p class="list-group-item-text">Location: '+this.location+"</p></div></a></div>"),$(".member-container").append(this.memberElement)},o.prototype.displayResultsMusicians=function(){var e=this.profilePic;return e=e.split('"'),e=e[1],this.searchElement=$('<div class="list-group results"><a href="#" class="list-group-item result-block"><img id="memberPic" class="search-profile-pic" src="'+e+'"><div class="search-result-info"><h4 class="list-group-item-heading">'+this.name+'</h4><p class="list-group-item-text">Location: '+this.location+"</p></div></a></div>"),$("#search-results-musicians").append(this.searchElement),this.searchElement};var a,r=[],l=[],c=function(e){this.name=e,l.push(this),this.members=[],this.photos=[]};c.prototype.render=function(){$(".band-name").text(this.name),$(".band-location").text(this.location),$(".band-profile-pic").css({backgroundImage:this.profilePic}),$(".band-profile-top").css({backgroundImage:this.backgroundPic}),$(".band-improv-comp").val(this.improvComp),$(".band-birthdate").text(this.birthdate);for(var e=0;e<this.media.length;e++)$(".band-media").append(this.media[e]);for(var e=0;e<this.members.length;e++)this.members[e].displayAsMember();$(".band-about").text(this.about),$(".band-philosophy").text(this.philosophy),this.combineMemberInfo(),console.log("this band: ",this);var t=this.instruments,i=n(t),o=".band-instrumentation";s(o,i);var a=this.styles,r=n(a),l=".band-styles";s(l,r);var c=this.inspirations,d=n(c),u=".band-inspirations";s(u,d)},c.prototype.combineMemberInfo=function(){console.log("this test: ",this);var e=_.chain(this.members).pluck("instruments").flatten().uniq().value();this.instruments=e;var t=_.chain(this.members).pluck("styles").flatten().uniq().value();this.styles=t;var n=_.chain(this.members).pluck("inspirations").flatten().uniq().value();this.inspirations=n},c.prototype.displayResultsBands=function(){var e=this.profilePic;return e=e.split('"'),e=e[1],this.searchElement=$('<div class="list-group results"><a href="#" class="list-group-item result-block"><img id="memberPic" class="search-profile-pic" src="'+e+'"><div class="search-result-info"><h4 class="list-group-item-heading">'+this.name+'</h4><p class="list-group-item-text">Location: '+this.location+"</p></div></a></div>"),$("#search-results-bands").append(this.searchElement),this.searchElement},$(document).on("click","#navbar-search",function(){var e="search-and-results.html";window.location=e}),$(".join").on("click",function(){var e="signup.html";window.location=e});$('<div class="enter-info"><h1 class="enter-info-heading">enter info</h1></div>');$("#new-user-form").on("submit",function(e){e.preventDefault();var t=$(e.target),n=t.find("[name=new-user]").val(),s=t.find("[name=new-email]").val(),i=t.find("[name=new-password]").val(),l=new o(n,s,i);r.push(l),a=l,$("#new-user-form").hide(),$(".sign-up-page").append(d),$(".enter-info").append(u,h,m,v,b,k,x,D,C),$(".edit-pagination").append(f,p,g,y,w,M,Y,S),$(h).hide(),$(m).hide(),$(v).hide(),$(b).hide(),$(k).hide(),$(x).hide(),$(D).hide(),$(C).hide(),$(f).hide(),$(p).hide(),$(g).hide(),$(y).hide(),$(w).hide(),$(M).hide(),$(Y).hide(),$(S).hide()});var d=$('<div class="edit-popup"><div class="enter-info-heading"><h2>Create Profile</h2></div><div class="enter-info"></div><div class="edit-pagination"></div></div>'),u=$('<h3>Is this for an Individual or Band?</h3><button class="which is-individual btn btn-success">Individual</button><button class="which is-band btn btn-success">Band</button>');$(document).on("click",".is-individual",function(){$(u).hide(),$(h).show(),$(f).show()}),$(document).on("click",".is-band",function(){$(u).hide(),$(m).show(),$(p).show()});var h=$('<h3>Basic Info</h3><form id="edit-profile-form" class="form-horizontal" role="form"><div class="form-group"><h4>Name</h4><div class="col-sm-10"><input type="text" name="name" class="form-control" class="edit-input" placeholder="Your Name..."></div></div><div class="form-group"><h4>Location</h4><div class="col-sm-10"><input type="text" name="location" class="form-control" class="edit-input" placeholder="Your Location..."></div></div><div class="form-group"><h4>Alias/Bandname</h4><div class="col-sm-10"><input type="text" name="alias" class="form-control" class="edit-input" placeholder="Alias/Bandname..."></div></div><div class="form-group"><h4>Birthdate</h4><div class="col-sm-10"><input type="date" id="birthdate" class="form-control" class="edit-input" placeholder=""></div><div id="#birth-date-info"></div></div></form>'),f=$('<button class="previous previous-which btn btn-success btn-sm">Previous</button><button class="next next-musicInfo btn btn-success btn-sm">Next</button>');$(document).on("blur","#birthdate",function(){$("#birth-date-info").empty();var n=$("#birthdate").val(),s=e(n);console.log("ageConverted: ",s);var i=t(n);console.log("astro: ",i);var o=$("<h4>Age: "+s+", "+i+"</h4>");$(h).append(o)}),$(document).on("click",".previous-which",function(){$(h).hide(),$(f).hide(),$(u).show()}),$(document).on("click",".next-musicInfo",function(){$(h).hide(),$(f).hide(),$(v).show(),$(g).show()});var m=$('<h3>Basic Info</h3><form id="edit-profile-form" class="form-horizontal" role="form"><div class="form-group"><h4>Band Name:</h4><div class="col-sm-10"><input type="text" name="name" class="form-control" class="edit-input" placeholder="Band Name..."></div></div><div class="form-group"><h4>Location:</h4><div class="col-sm-10"><input type="text" name="location" class="form-control" class="edit-input" placeholder="Your Location..."></div></div><div class="form-group"><h4>Have Played Together Since:</h4><div class="col-sm-10"><input type="date" name="birthdate" class="form-control" class="edit-input" placeholder=""></div></div></form>'),p=$('<button class="previous previous-which btn btn-success btn-sm">Previous</button><button class="next next-band-musicInfo btn btn-success btn-sm">Next</button>');$(document).on("click",".previous-which",function(){$(m).hide(),$(u).show(),$(p).hide()}),$(document).on("click",".next-band-musicInfo",function(){$(m).hide(),$(b).show(),$(y).show()});var v=$('<h3>Musical Info</h3><form id="edit-profile-form" class="form-horizontal" role="form"><div class="form-group"><h4>Instruments:</h4><div class="col-sm-10"><input type="text" name="instruments" class="form-control edit-input" placeholder="Instruments you play..."></div></div><div class="form-group"><h4>Styles:</h4><div class="col-sm-10"><input type="text" name="styles" class="form-control edit-input" placeholder="Styles you play..."></div></div><div class="form-group"><h4>Skills:</h4><div class="col-sm-10"><input type="text" name="skills" class="form-control edit-input" placeholder="Other music related skills..."></div></div><div class="form-group"><h4>Inspired By:</h4><div class="col-sm-10"><input type="text" name="inspirations" class="form-control edit-input" placeholder="Who inspires you..."></div></div><div class="form-group"><h4>Impovisational/Compositional Orientation:</h4><div class="col-sm-10"><input type="range" min="0" max="100" name="orientation" class="form-control edit-input"></div></div></form>'),g=$('<button class="previous previous-basicInfo btn btn-success btn-sm">Previous</button><button class="next next-pics btn btn-success btn-sm">Next</button>');$(document).on("click",".previous-basicInfo",function(){$(v).hide(),$(g).hide(),$(h).show(),$(f).show()}),$(document).on("click",".next-pics",function(){$(v).hide(),$(g).hide(),$(k).show(),$(w).show()});var b=$('<h3>Musical Info</h3><form id="edit-profile-form" class="form-horizontal" role="form"><div class="form-group"><h4>Members:</h4><div class="col-sm-10"><input type="text" name="members" class="form-control edit-input" placeholder="Members..."></div></div><div class="form-group"><h4>Instrumentation:</h4><div class="col-sm-10"><input type="text" name="instruments" class="form-control edit-input" placeholder="Band Instrumentation..."></div></div><div class="form-group"><h4>Styles:</h4><div class="col-sm-10"><input type="text" name="styles" class="form-control edit-input" placeholder="Styles you play..."></div></div><div class="form-group"><h4>Inspired By:</h4><div class="col-sm-10"><input type="text" name="inspirations" class="form-control edit-input" placeholder="Who inspires you..."></div></div><div class="form-group"><h4>Impovisational/Compositional Orientation:</h4><div class="col-sm-10"><input type="range" min="0" max="100" name="orientation" class="form-control edit-input"></div></div></form>'),y=$('<button class="previous previous-band-basicInfo btn btn-success btn-sm">Previous</button><button class="next next-band-pics btn btn-success btn-sm">Next</button>');$(document).on("click",".previous-band-basicInfo",function(){$(b).hide(),$(y).hide(),$(m).show(),$(p).show()}),$(document).on("click",".next-band-pics",function(){$(b).hide(),$(y).hide(),$(x).show(),$(M).show()});var k=$('<h3>Profile pics</h3><form id="edit-profile-form" class="form-horizontal" role="form"><div class="profile-pic-div"><img class="profile-pic-position" src="http://placehold.it/150x150"><div class="form-group choose-pic"><h4>Profile Pic</h4><div class="col-sm-10"><input type="file" name="profilePic" class="form-control" class="edit-input"></div></div></div><div class="background-pic-div"><div class="background-image-holder" src="http://placehold.it/250x110"></div><div class="form-group"><h4>Background Pic</h4><div class="col-sm-10"><input type="file" name="BackgroundPic" class="form-control choose-pic" class="edit-input"></div></div></div></form></div>'),w=$('<button class="previous previous-musicInfo btn btn-success btn-sm">Previous</button><button class="next next-about btn btn-success btn-sm">Next</button>');$(document).on("click",".previous-musicInfo",function(){$(k).hide(),$(w).hide(),$(v).show(),$(g).show()}),$(document).on("click",".next-about",function(){$(k).hide(),$(w).hide(),$(D).show(),$(Y).show()});var x=$('<h3>Profile pics</h3><form id="edit-profile-form" class="form-horizontal" role="form"><div class="profile-pic-div"><img class="profile-pic-position" src="http://placehold.it/150x150"><div class="form-group choose-pic"><h4>Profile Pic</h4><div class="col-sm-10"><input type="file" name="profilePic" class="form-control" class="edit-input"></div></div></div><div class="background-pic-div"><div class="background-image-holder"></div><div class="form-group"><h4>Background Pic</h4><div class="col-sm-10"><input type="file" name="BackgroundPic" class="form-control choose-pic" class="edit-input"></div></div></div></form></div>'),M=$('<button class="previous previous-band-musicInfo btn btn-success btn-sm">Previous</button><button class="next next-band-about btn btn-success btn-sm">Next</button>');$(document).on("click",".previous-band-musicInfo",function(){$(x).hide(),$(M).hide(),$(b).show(),$(y).show()}),$(document).on("click",".next-band-about",function(){$(x).hide(),$(M).hide(),$(C).show(),$(S).show()});var D=$('<h3>About</h3><form id="edit-profile-form" class="form-horizontal" role="form"><div class="form-group"><h4>About:</h4><div class="col-sm-10"><textarea type="text" name="about" class="form-control edit-input" placeholder="Tell us about you and your musical endeavors..."></textarea></div></div><div class="form-group"><h4>Philosophy:</h4><div class="col-sm-10"><textarea type="text" name="philosophy" class="form-control edit-input" placeholder="Tell us about your philosophy on music..."></textarea></div></div><div class="form-group"><h4>Eneagram Personality Type:</h4><div class="col-sm-10"><input type="number" name="personality" class="form-control edit-input number-input" min="1" max="9"><button type="button" class="btn btn-default btn-xs" data-container="body" data-toggle="popover" data-placement="right" data-content="The Eneagram is a personality test that is incredibly intuitive and spot on with describing personalities. It is a way of determining how your personality will mesh with the personalities of the musicians you connect with on ToneTribe.  It is also helpful for your own self-knowledge.">?</button></div></form>'),Y=$('<button class="previous previous-pics btn btn-success btn-sm">Previous</button><button class="next done btn btn-success btn-sm">Done</button>');$(document).on("click",".previous-pics",function(){$(D).hide(),$(Y).hide(),$(k).show(),$(w).show()}),$(document).on("click",".done",function(){$(d).hide();var e="profile-user.html";window.location=e});var C=$('<h3>About</h3><form id="edit-profile-form" class="form-horizontal" role="form"><div class="form-group"><h4>About:</h4><div class="col-sm-10"><textarea type="text" name="about" class="form-control edit-input" placeholder="Tell us about you and your musical endeavors..."></textarea></div></div><div class="form-group"><h4>Philosophy:</h4><div class="col-sm-10"><textarea type="text" name="philosophy" class="form-control edit-input" placeholder="Tell us about your philosophy on music..."></textarea></div></div></form>'),S=$('<button class="previous previous-band-pics btn btn-success btn-sm">Previous</button><button class="next band-done btn btn-success btn-sm">Done</button>');$(document).on("click",".previous-band-pics",function(){$(C).hide(),$(S).hide(),$(x).show(),$(M).show()}),$(document).on("click",".band-done",function(){$(d).hide();var e="band-profile-user.html";window.location=e});var T=$('<div class="gallery-background"><div class="gallery"><h3 class="gallery-heading">Photo Gallery</h3></div></div>');$(document).on("click",".view-gallery",function(){$(".container").append(T)}),$(".edit-directions").hide();var I=$('<div class="info-block embed-info-block"><h5 class="info-block-heading embed-heading">Embed Media</h5><div class="embed-info">Here you can embed media from other sites including Soundcloud, Youtube, CDBaby, and any other site that provides the iframe code for media. Click on share, and there you will find an embed link. (Make sure that http:// is in the code.)</div><form id="embed-form" class="form-horizontal" role="form"><div class="form-group"><label for="code" class="col-sm-2 control-label">Embed Code:</label><div class="col-sm-10"><input type="text" class="form-control" name="code" ></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="submit" class="btn btn-success btn-xs">Embed</button></div></div></form></div>');$(document).on("click",".embed-media-button",function(){$(".media").before(I),$(".embed-media-button").hide()}),$(document).on("submit","#embed-form",function(e){e.preventDefault(),$(I).hide(),$(".embed-media-button").show();var t=$(e.target),n=t.find("[name=code]").val();$(".media").append(n);var s=$(".name").data();s=s.userId;var o=i(s);o.media.push(n)}),$(document).on("click",".edit-profile",function(){$(".words").append('<button class="btn btn-default btn-xs delete-word">X</button>'),$(".words, .about, .philosophy").addClass("editing-profile edit"),$(".name, .location, .band").addClass("edit"),$(".sidebar-list-text").addClass("editing-profile"),$(".name-loc").addClass("edit-name-loc"),$("#edit").removeClass("edit-profile btn-xs").addClass("edit-done btn-md").text("Done Editing"),$("edit-directions").show(),$(".media").before(I),$(I).show(),$(".profile-pic").append('<span class="glyphicon glyphicon-picture make-it-white edit-icon-profile">Change-Photo</span>'),$(".profile-top").append('<span class="glyphicon glyphicon-picture make-it-white edit-icon-background">Change-Background</span>'),$(this).blur(),$(".ratio-graph").hide(),$(".ratio-graph").after('<input type="range" id="edit-ratio">'),$(".sidebar-list-text").append('<input type="text" class="add-new-word editing-profile edit" placeholder="Add New...">');var e=$(".name").data();e=e.userId;var t=i(e);console.log("this user: ",t),$(document).on("blur",".add-new-word",function(){console.log("find name of value by title: ",$(this).closest("p").attr("title"));var e=$(this).val(),n=$(this).closest("p").attr("title");t[n].push(e),console.log("thisUser new info added test: ",t),$(this).closest(".sidebar-list-text").append('<div class="words editing-profile edit">'+$(this).val()+"</div>"),$(this).closest(".sidebar-list-text").find(".words").last().append('<button class="btn btn-default btn-xs delete-word">X</button>'),$(this).closest(".sidebar-list-text").append('<input type="text" class="add-new-word editing-profile edit" placeholder="Add New...">'),$(this).remove()
}),$(document).on("click",".delete-word",function(){console.log("find name of value by title: ",$(this).closest("p").attr("title"));var e=$(this).closest(".words").text().split(",").shift().split("X").pop(),n=$(this).closest("p").attr("title");console.log("val",e),console.log("attr",n),console.log("thisuser:",t);var s=t[n];console.log("array: ",s),console.log("array index of",s.indexOf(e)),console.log("thisUser new info added test: ",t),$(this).closest(".words").remove()}),$(document).on("click",".edit",function(){$(this).attr("contenteditable","true"),$(this).focus()}),$(document).on("blur",".edit",function(){console.log("find name of value by title: ",$(this).closest("p").attr("title"));var e=$(this).closest("p").attr("title");console.log("attr blur .edit",e)}),$(document).on("click",".edit-done",function(){$(".edit").attr("contenteditable","false"),$(".sidebar-list-text, .words, .name-loc, .about, .philosophy").removeClass("editing-profile edit"),$("#edit").addClass("edit-profile btn-xs").removeClass("edit-done btn-md").text("Edit Profile"),$(".name, .location, .band").removeClass("edit"),$(".name-loc").removeClass("edit-name-loc"),$(I).hide(),$(".edit-icon").hide(),$(".edit-directions").hide(),$(".edit-icon-profile").hide(),$(".edit-icon-background").hide(),$(".delete-word").hide(),$(".ratio-graph").show();var e=2*$("#edit-ratio").val();console.log("ratioValue: ",e),$("#ratio-bar").css({width:e}),$("#edit-ratio").hide(),$(".add-new-word").remove()})})}),$(document).on("ready",function(){var e=function(e){if(e){for(var t=e,n=[],s=0;s<t.length;s++)n.push(t[s]);for(var i=0;i<n.length-1;i++)n[i]="<div class='words'> "+n[i]+", </div>";return n[n.length-1]="<div class='words'>"+n[i]+"</div>",n}},t=function(e,t){if(t){$(e).text("");for(var n=0;n<t.length;n++)$(e).append(t[n])}},n=function(e){for(var t=0;t<i.length;t++)if(i[t].userId===e)return i[t]},s=function(e,t){this.email=e,this.password=t,this.photos=[],i.push(this)};s.prototype.render=function(){$(".name").text(this.name),$(".name").data("userId",this.userId),$(".location").text(this.location);var n=this.bands,s=e(n),i=".bands";t(i,s),$(".profile-pic").css({backgroundImage:this.profilePic}),$(".profile-top").css({backgroundImage:this.backgroundPic});var o=this.instruments,a=e(o),r=".instruments";t(r,a);var l=this.styles,c=e(l),d=".styles";t(d,c);var u=this.skills,h=e(u),f=".skills";t(f,h);var m=this.inspirations,p=e(m),v=".inspirations";t(v,p),$(".improv-comp").val(this.improvComp),$(".birthday").text(this.age),$(".astro-sign").text(this.astro);for(var g=0;g<this.media.length;g++)$(".media").append(this.media[g]);$(".about").text(this.about),$(".philosophy").text(this.philosophy)},s.prototype.addToBand=function(e){this.band=e,console.log("this: "),e.push(this),e.combineMemberInfo()},s.prototype.displayAsMember=function(){var e=this.profilePic;e=e.split('"'),e=e[1],this.memberElement=$('<div class="list-group results"><a href="#" class="list-group-item result-block"><img id="memberPic" class="search-profile-pic" src="'+e+'"><div class="search-result-info"><h4 class="list-group-item-heading">'+this.name+'</h4><p class="list-group-item-text">Location: '+this.location+"</p></div></a></div>"),$(".member-container").append(this.memberElement)},s.prototype.displayResultsMusicians=function(){var e=this.profilePic;return e=e.split('"'),e=e[1],this.searchElement=$('<div class="list-group results"><a href="#" class="list-group-item result-block"><img id="memberPic" class="search-profile-pic" src="'+e+'"><div class="search-result-info"><h4 class="list-group-item-heading">'+this.name+'</h4><p class="list-group-item-text">Location: '+this.location+"</p></div></a></div>"),$("#search-results-musicians").append(this.searchElement),this.searchElement};var i=[],o=[],a=function(e){this.name=e,o.push(this),this.members=[],this.photos=[]};a.prototype.render=function(){$(".band-name").text(this.name),$(".band-location").text(this.location),$(".band-profile-pic").css({backgroundImage:this.profilePic}),$(".band-profile-top").css({backgroundImage:this.backgroundPic}),$(".band-improv-comp").val(this.improvComp),$(".band-birthdate").text(this.birthdate);for(var n=0;n<this.media.length;n++)$(".band-media").append(this.media[n]);for(var n=0;n<this.members.length;n++)this.members[n].displayAsMember();$(".band-about").text(this.about),$(".band-philosophy").text(this.philosophy),this.combineMemberInfo(),console.log("this band: ",this);var s=this.instruments,i=e(s),o=".band-instrumentation";t(o,i);var a=this.styles,r=e(a),l=".band-styles";t(l,r);var c=this.inspirations,d=e(c),u=".band-inspirations";t(u,d)},a.prototype.combineMemberInfo=function(){console.log("this test: ",this);var e=_.chain(this.members).pluck("instruments").flatten().uniq().value();this.instruments=e;var t=_.chain(this.members).pluck("styles").flatten().uniq().value();this.styles=t;var n=_.chain(this.members).pluck("inspirations").flatten().uniq().value();this.inspirations=n},a.prototype.displayResultsBands=function(){var e=this.profilePic;return e=e.split('"'),e=e[1],this.searchElement=$('<div class="list-group results"><a href="#" class="list-group-item result-block"><img id="memberPic" class="search-profile-pic" src="'+e+'"><div class="search-result-info"><h4 class="list-group-item-heading">'+this.name+'</h4><p class="list-group-item-text">Location: '+this.location+"</p></div></a></div>"),$("#search-results-bands").append(this.searchElement),this.searchElement};var r=$('<div class="gallery-background"><div class="gallery"><h3 class="gallery-heading">Photo Gallery</h3></div></div>');$(document).on("click",".view-gallery",function(){$(".container").append(r)}),$(".edit-directions").hide();var l=$('<div class="info-block embed-info-block"><h5 class="info-block-heading embed-heading">Embed Media</h5><div class="embed-info">Here you can embed media from other sites including Soundcloud, Youtube, CDBaby, and any other site that provides the iframe code for media. Click on share, and there you will find an embed link. (Make sure that http:// is in the code.)</div><form id="embed-form" class="form-horizontal" role="form"><div class="form-group"><label for="code" class="col-sm-2 control-label">Embed Code:</label><div class="col-sm-10"><input type="text" class="form-control" name="code" ></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="submit" class="btn btn-success btn-xs">Embed</button></div></div></form></div>');$(document).on("click",".embed-media-button",function(){$(".media").before(l),$(".embed-media-button").hide()}),$(document).on("submit","#embed-form",function(e){e.preventDefault(),$(l).hide(),$(".embed-media-button").show();var t=$(e.target),s=t.find("[name=code]").val();$(".media").append(s);var i=$(".name").data();i=i.userId;var o=n(i);o.media.push(s)}),$(document).on("click",".edit-profile",function(){var e=[$(".bands"),$(".instruments"),$(".styles"),$(".skills"),$(".inspirations")];e.map(function(e){var t=e.closest(".sidebar-list").attr("title");console.log("info attr: ",t),e.text(user[t]);var n=e.text().split(", ");e.empty(),console.log("infoArray: ",n),n.map(function(t){var n=t.split("").pop();"X"===n&&(t=t.substring(0,t.length-1)),e.append('<div class="words editing-profile edit">'+t+"</div>")})}),$(".words").append('<button class="btn btn-default btn-xs delete-word">X</button>'),$(".words, .about, .philosophy").addClass("editing-profile edit"),$(".name, .location, .band").addClass("edit"),$(".sidebar-list-text").addClass("editing-profile"),$(".name-loc").addClass("edit-name-loc"),$(".edit-profile").removeClass("edit-profile btn-xs").addClass("edit-done btn-md").text("Done Editing"),$(".media").before(l),$(l).show(),$(".profile-pic").append('<span class="glyphicon glyphicon-picture make-it-white edit-icon-profile">Change-Photo</span>'),$(".profile-top").append('<span class="glyphicon glyphicon-picture make-it-white edit-icon-background">Change-Background</span>'),$(this).blur(),$(".ratio-graph").hide(),$(".ratio-graph").after('<input type="range" id="edit-ratio">'),$(".sidebar-list-text").append('<input type="text" class="add-new-word editing-profile edit" placeholder="Add New...">'),$(document).on("blur",".add-new-word",function(){var e=($(this).val(),$(this).closest(".sidebar-list").attr("title"));console.log("attr: ",e),$(this).closest(".sidebar-list-text").append('<div class="words editing-profile edit">'+$(this).val()+"</div>"),$(this).closest(".sidebar-list-text").find(".words").last().append('<button class="btn btn-default btn-xs delete-word">X</button>'),$(this).closest(".sidebar-list-text").append('<input type="text" class="add-new-word editing-profile edit" placeholder="Add New...">');var t=$(this).closest(".sidebar-list-text").text().split("X");t.pop(),t=t.join(", "),console.log("updatedInfo: ",t),user[e]=t,console.log(user),$(this).remove()}),$(document).on("click",".delete-word",function(){console.log("find name of value by title: ",$(this).closest("p").attr("title"));var e=$(this).closest(".words").text().split(",").shift().split("X").pop(),t=$(this).closest("p").attr("title");console.log("val",e),console.log("attr",t),console.log("thisuser:",thisUser);var n=thisUser[t];console.log("array: ",n),console.log("array index of",n.indexOf(e)),$(this).closest(".words").remove()}),$(document).on("click",".edit",function(){$(this).attr("contenteditable","true"),$(this).focus()}),$(".about, .philosophy").on("blur",function(){var e=$(this).closest(".info-block").attr("title"),t=$(this).text();user[e]=t,console.log("user updated about philosophy: ",user)}),$(document).on("click",".edit-done",function(){$(".edit").attr("contenteditable","false"),$(".sidebar-list-text, .words, .name-loc, .about, .philosophy").removeClass("editing-profile edit"),$(".edit-done").addClass("edit-profile btn-xs").removeClass("edit-done btn-md").text("Edit Profile"),$(".name, .location, .band").removeClass("edit"),$(".name-loc").removeClass("edit-name-loc"),$(l).hide(),$(".edit-icon").hide(),$(".edit-directions").hide(),$(".edit-icon-profile").hide(),$(".edit-icon-background").hide(),$(".delete-word").hide(),$(".ratio-graph").show();var e=2*$("#edit-ratio").val();console.log("ratioValue: ",e),$("#ratio-bar").css({width:e}),$("#edit-ratio").hide(),$(".add-new-word").remove()})})}),$(document).on("ready",function(){var e=$("#search-result-template").html(),t=Handlebars.compile(e),n=function(e){if($.isArray(e)===!0){for(var t=0;t<e.length;t++)e[t]=e[t].toLowerCase();return e}if(e){var n=e.toLowerCase();return n}},s=[],i=[],o=[],a=[];$("#submitSearch").on("submit",function(e){$(".search-form").hide(),$(".search-results").addClass("display");var s=[];console.log("submitted..."),$("#search-results-musicians").empty(),$("#search-results-bands").empty(),e.preventDefault();var i=$(e.target),o=[],a=[];i.find(".searchInput").map(function(){return{name:$(this).attr("name"),value:n($(this).val())}}).toArray().filter(function(e){return e.value}).forEach(function(e){o.push(e.name),a.push(e.value)}),console.log("searchedForValue: ",a),console.log("searchedFor: ",o);var r={searchedFor:o,searchedForValue:a};console.log("searchFor: ",r);var l=$.ajax({type:"POST",url:"/api/findUsers",traditional:!0,data:r}).done(function(){console.log("success")}).fail(function(){console.log("error")}).always(function(){var e=_.uniq(l.responseJSON);console.log("results: ",e),0===e.length&&$(".no-results").addClass("display");for(var n=0;n<e.length;n++){var s=e[n];console.log(s);var i=t(s);console.log(i),$("#search-results-musicians").append(i)}});console.log("positiveResultsFinal: ",s)}),$(document).on("click",".search-again",function(){$(".search-results").removeClass("display"),$(".no-results").removeClass("display"),o=[],a=[],s=[],i=[],$(".search-form").show(),$("input").val("")})}),$(document).on("ready",function(){var e={bands:[],instruments:[],styles:"",skills:[],inspirations:[],improvComp:void 0};$(".sidebar-list-text").append('<input type="text" class="add-new-word editing-profile edit" placeholder="Add New...">'),$(document).on("blur",".add-new-word",function(){var t=$(this).val(),n=$(this).closest("p").attr("name");e[n].push(t);var s=e[n];$("#"+n).attr("value",s),console.log("userInfo",e),$(this).closest(".sidebar-list-text").append('<div class="words editing-profile edit">'+$(this).val()+"</div>"),$(this).closest(".sidebar-list-text").find(".words").last().append('<button class="btn btn-default btn-xs delete-word">X</button>'),$(this).closest(".sidebar-list-text").append('<input type="text" class="add-new-word editing-profile edit" placeholder="Add New...">'),$(this).remove()}),$(document).on("click",".delete-word",function(){var t=$(this).closest(".words").text();t=t.substring(0,t.length-1);var n=$(this).closest("p").attr("name");console.log("val, attr",t,n);for(var s=e[n],i=0;i<s.length;i++)console.log("a[i], val",s[i],t),s[i]===t&&(s.splice(i,1),console.log("a deleted: ",s));console.log("after deleted...",e),$(this).closest(".words").remove()}),$("#improvCompRange").change(function(){e.improvComp=$(this).text(),console.log(e),$("#comp").text($(this).text()),$("#improv").text(100-$(this).text()),$("#improvComp").attr("value",$(this).text()),$("#ratio-bar-signup").attr("style","width: "+$(this).text()+"%"),$("#ratio-bar-signup2").attr("style","width: "+(100-$(this).text())+"%")}),$("#signup2-submit").on("click",function(){var t=$(this).closest("form").find("#id").attr("value");console.log("id: ",t),e.id=t;var n=$.ajax({type:"POST",url:"/updateUserFromClient",traditional:!0,data:e}).done(function(){console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete, searchResults: ",n)})})});